<?php session_start(); include _DIR_.'/../config/db.php'; if(!isset($_SESSION['admin'])) header('Location: login.php'); if(!isset($_GET['id'])) header('Location: products.php'); $id=(int)$_GET['id']; if($_SERVER['REQUEST_METHOD']==='POST'){ $t=$_POST['title']; $d=$_POST['description']; $price=(float)$_POST['price']; $qty=(int)$_POST['quantity']; $conn->query("UPDATE products SET title='".$conn->real_escape_string($t)."', description='".$conn->real_escape_string($d)."', price=".$price.", quantity=".$qty." WHERE id=$id"); header('Location: products.php'); exit; } $p=$conn->query('SELECT * FROM products WHERE id='.$id)->fetch_assoc(); ?>
<!doctype html><html><head><meta charset='utf-8'><title>Edit</title><link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css' rel='stylesheet'></head><body>
<div class='container my-5'><h3>Edit Product</h3><form method='post'><input class='form-control mb-2' name='title' value='<?= htmlspecialchars($p['title']) ?>' required><input class='form-control mb-2' name='description' value='<?= htmlspecialchars($p['description']) ?>'><input class='form-control mb-2' name='price' value='<?= $p['price'] ?>' required><input class='form-control mb-2' name='quantity' value='<?= $p['quantity'] ?>' required><button class='btn btn-primary'>Save</button></form></div></body></html>